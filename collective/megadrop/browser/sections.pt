<tal:sections tal:define="portal_tabs view/portal_tabs"
     tal:condition="portal_tabs"
     i18n:domain="plone">
    <h2 class="hiddenStructure" i18n:translate="heading_sections">Navigation</h2>

    <ul id="portal-globalnav"
        tal:define="selected_tab python:view.selected_portal_tab">
        <tal:tabs tal:repeat="tab portal_tabs">
            <li tal:define="tid tab/id"
                tal:attributes="id string:portaltab-${tid};
                    class python:selected_tab==tid and 'selected' or 'plain'">
                    <h2><a class="mdtab" id="#" href=""
                        tal:content="tab/name"
                        tal:attributes="
                        href tab/url;
                        title tab/description|nothing;
                        id string:megadrop-${tid}" onclick="return false">
                            Tab Name
                    </a></h2>

                <div id="#" class="#" tal:attributes="class string:megadrop-${tid} megahide megadrop">
                    <tal:outer tal:define="site view/getPortalRoot; tabObj python:site[tid]">
                        <tal:manage>
                            <div id="managetab" tal:condition="python:context.portal_membership.checkPermission('Megadrop: Set Tabs', context)">
                                <a href="" tal:attributes="href string:${tabObj/absolute_url}/@@md_custom_tab" tal:condition="python:not view.isCustomTab(tabObj)">Customize Tab</a>
                                <a href="" tal:attributes="href string:${tabObj/absolute_url}/@@md_custom_tab" tal:condition="python:view.isCustomTab(tabObj)">Remove Custom Tab</a>
                            </div>
                        </tal:manage>

                        <tal:customTab tal:condition="python:view.isCustomTab(tabObj)">
                            <div id="megafolder">
                                <div tal:attributes="data-tile string:${context/absolute_url}/@@megadrop.tiles.richtext/enter-tab-content" />
                            </div>
                        </tal:customTab>
                         
                        <tal:default tal:condition="python:not view.isCustomTab(tabObj)" tal:repeat="items python:view.sectionQuery(tabObj)">
                            <span tal:replace="structure items" />
                        </tal:default>
                    </tal:outer>

                </div>
            </li>

        </tal:tabs>
    </ul>
</tal:sections>